{% extends "admin/base_admin.html" %}

{% block title %}Manage Homepage Images - FAWNA Hotel{% endblock %}

{% block admin_content %}
<style>
    .btn-view {
    background: linear-gradient(135deg, #42A5F5, #64B5F6);
    color: white;
}

.btn-view:hover {
    background: linear-gradient(135deg, #2196F3, #42A5F5);
    color: white;
}

.btn-edit {
    background: linear-gradient(135deg, #ffc107, #ffcc00);
    color: white;
    border: none;
}

.btn-edit:hover {
    background: linear-gradient(135deg, #e0a800, #ffcc00);
    color: white;
}

.btn-delete {
    background-color: #dc3545;
    color: white;
    border: none;
}

.btn-delete:hover {
    background-color: #c82333;
    color: white;
}

.light-button {
    background: linear-gradient(135deg, #42A5F5, #64B5F6);
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 4px;
    cursor: pointer;
}
 
.btn-edit,
.btn-delete {
    width: 40px;
    height: 40px;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    font-size: 22px;
}

.btn-view i,
.btn-edit i,
.btn-delete i {
    font-size: 22px;
}
</style>
<div class="admin-card">
    <div class="admin-card-header d-flex justify-content-between align-items-center">
        <h2>Manage Homepage Images</h2>
        <button class="light-button" data-bs-toggle="modal" data-bs-target="#addImageModal">
            <i class="fas fa-plus"></i> Add New Image
        </button>
    </div>
    <form method="POST" action="{{ url_for('admin_update_homepage_settings') }}" class="mb-4 d-flex align-items-center gap-3">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <label for="carousel_interval" class="form-label mb-0">Carousel Interval (seconds):</label>
        <input type="number" class="form-control" id="carousel_interval" name="carousel_interval" min="1" value="{{ carousel_interval|default(4) }}" style="width: 100px;">
        <button type="submit" class="btn btn-view">Save Interval</button>
    </form>
    <div class="row">
        {% for image in homepage_images %}
        <div class="col-md-3 mb-4">
            <div class="card h-100">
                <img src="{{ url_for('static', filename='images/homepage/' + image.filename) }}" class="card-img-top" alt="Homepage Image" style="height: 180px; object-fit: cover;">
                <div class="card-body d-flex flex-column align-items-center">
                    <form method="POST" action="{{ url_for('admin_edit_homepage_image', image_id=image.id) }}" enctype="multipart/form-data" class="w-100 mb-2 d-flex align-items-center justify-content-center gap-2">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        <div class="input-group input-group-sm flex-nowrap" style="max-width: 110px;">
                            <input type="number" class="form-control" name="order" value="{{ image.order }}" min="0" style="width: 50px;" title="Order" aria-label="Order">
                            <button type="submit" class="btn btn-view" title="Update Order"><i class="fas fa-sort-numeric-up"></i></button>
                        </div>
                    </form>
                    <div class="d-flex justify-content-center gap-2 mt-2">
                        <form method="POST" action="{{ url_for('admin_edit_homepage_image', image_id=image.id) }}" enctype="multipart/form-data" class="d-inline">
                            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                            <label class="btn btn-edit mb-0" title="Replace Image" style="cursor:pointer;">
                                <i class="fas fa-edit"></i>
                                <input type="file" name="image" accept="image/*" class="d-none" onchange="this.form.submit()">
                            </label>
                        </form>
                        <form method="POST" action="{{ url_for('admin_delete_homepage_image', image_id=image.id) }}" class="d-inline">
                            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                            <button type="submit" class="btn btn-delete" title="Delete Image" onclick="return confirm('Delete this image?')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Add Image Modal -->
<div class="modal fade" id="addImageModal" tabindex="-1" aria-labelledby="addImageModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <form method="POST" action="{{ url_for('admin_add_homepage_image') }}" enctype="multipart/form-data">
                <div class="modal-header">
                    <h5 class="modal-title" id="addImageModalLabel">Add Homepage Image</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <div class="mb-3">
                        <label for="image" class="form-label">Image</label>
                        <input type="file" class="form-control" id="image" name="image" accept="image/*" required>
                        <div class="form-text">Recommended size: 1200x600px. Max 5MB.</div>
                    </div>
                    <div class="mb-3">
                        <label for="order" class="form-label">Order (optional)</label>
                        <input type="number" class="form-control" id="order" name="order" min="0" value="0">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-admin-primary">Add Image</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %} 